{"code":"_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[11],{Mybo:function(e,t,a){\"use strict\";a.r(t);var r=a(\"o0o1\"),n=a.n(r),c=a(\"HaE+\"),l=a(\"1OyB\"),s=a(\"vuIU\"),o=a(\"Ji7U\"),i=a(\"md7G\"),u=a(\"foSv\"),p=a(\"q1tI\"),d=a.n(p),b=a(\"pVnL\"),f=a.n(b),v=(a(\"Wt1U\"),a(\"3WF5\")),O=a.n(v),j=a(\"TSYQ\"),m=a.n(j),h=(a(\"c31U\"),a(\"ZeOK\")),g=a(\"ICNK\"),w=a(\"Y53p\"),y=a(\"H+2d\");function N(e){var t=e.children,a=e.className,r=m()(a),n=Object(g.a)(N,e),c=Object(w.a)(N,e);return d.a.createElement(c,f()({},n,{className:r}),t)}N.handledProps=[\"as\",\"children\",\"className\"],N.defaultProps={as:\"tbody\"},N.propTypes={};var A=N,R=a(\"MZgk\"),P=a(\"D1pA\");function x(e){var t=e.active,a=e.children,r=e.className,n=e.collapsing,c=e.content,l=e.disabled,s=e.error,o=e.icon,i=e.negative,u=e.positive,p=e.selectable,b=e.singleLine,v=e.textAlign,O=e.verticalAlign,j=e.warning,N=e.width,A=m()(Object(h.a)(t,\"active\"),Object(h.a)(n,\"collapsing\"),Object(h.a)(l,\"disabled\"),Object(h.a)(s,\"error\"),Object(h.a)(i,\"negative\"),Object(h.a)(u,\"positive\"),Object(h.a)(p,\"selectable\"),Object(h.a)(b,\"single line\"),Object(h.a)(j,\"warning\"),Object(h.d)(v),Object(h.f)(O),Object(h.g)(N,\"wide\"),r),R=Object(g.a)(x,e),E=Object(w.a)(x,e);return y.a.isNil(a)?d.a.createElement(E,f()({},R,{className:A}),P.a.create(o),c):d.a.createElement(E,f()({},R,{className:A}),a)}x.handledProps=[\"active\",\"as\",\"children\",\"className\",\"collapsing\",\"content\",\"disabled\",\"error\",\"icon\",\"negative\",\"positive\",\"selectable\",\"singleLine\",\"textAlign\",\"verticalAlign\",\"warning\",\"width\"],x.defaultProps={as:\"td\"},x.propTypes={},x.create=Object(R.e)(x,(function(e){return{content:e}}));var E=x;function k(e){var t=e.children,a=e.className,r=e.content,n=e.fullWidth,c=m()(Object(h.a)(n,\"full-width\"),a),l=Object(g.a)(k,e),s=Object(w.a)(k,e);return d.a.createElement(s,f()({},l,{className:c}),y.a.isNil(t)?r:t)}k.handledProps=[\"as\",\"children\",\"className\",\"content\",\"fullWidth\"],k.defaultProps={as:\"thead\"},k.propTypes={};var C=k;function q(e){var t=e.as,a=Object(g.a)(q,e);return d.a.createElement(C,f()({},a,{as:t}))}q.handledProps=[\"as\"],q.propTypes={},q.defaultProps={as:\"tfoot\"};var _=q;function T(e){var t=e.as,a=e.className,r=e.sorted,n=m()(Object(h.e)(r,\"sorted\"),a),c=Object(g.a)(T,e);return d.a.createElement(E,f()({},c,{as:t,className:n}))}T.handledProps=[\"as\",\"className\",\"sorted\"],T.propTypes={},T.defaultProps={as:\"th\"};var B=T;function D(e){var t=e.active,a=e.cellAs,r=e.cells,n=e.children,c=e.className,l=e.disabled,s=e.error,o=e.negative,i=e.positive,u=e.textAlign,p=e.verticalAlign,b=e.warning,v=m()(Object(h.a)(t,\"active\"),Object(h.a)(l,\"disabled\"),Object(h.a)(s,\"error\"),Object(h.a)(o,\"negative\"),Object(h.a)(i,\"positive\"),Object(h.a)(b,\"warning\"),Object(h.d)(u),Object(h.f)(p),c),j=Object(g.a)(D,e),N=Object(w.a)(D,e);return y.a.isNil(n)?d.a.createElement(N,f()({},j,{className:v}),O()(r,(function(e){return E.create(e,{defaultProps:{as:a}})}))):d.a.createElement(N,f()({},j,{className:v}),n)}D.handledProps=[\"active\",\"as\",\"cellAs\",\"cells\",\"children\",\"className\",\"disabled\",\"error\",\"negative\",\"positive\",\"textAlign\",\"verticalAlign\",\"warning\"],D.defaultProps={as:\"tr\",cellAs:\"td\"},D.propTypes={},D.create=Object(R.e)(D,(function(e){return{cells:e}}));var z=D;function F(e){var t=e.attached,a=e.basic,r=e.celled,n=e.children,c=e.className,l=e.collapsing,s=e.color,o=e.columns,i=e.compact,u=e.definition,p=e.fixed,b=e.footerRow,v=e.headerRow,j=e.headerRows,N=e.inverted,R=e.padded,P=e.renderBodyRow,x=e.selectable,E=e.singleLine,k=e.size,q=e.sortable,T=e.stackable,B=e.striped,D=e.structured,H=e.tableData,L=e.textAlign,I=e.unstackable,W=e.verticalAlign,J=m()(\"ui\",s,k,Object(h.a)(r,\"celled\"),Object(h.a)(l,\"collapsing\"),Object(h.a)(u,\"definition\"),Object(h.a)(p,\"fixed\"),Object(h.a)(N,\"inverted\"),Object(h.a)(x,\"selectable\"),Object(h.a)(E,\"single line\"),Object(h.a)(q,\"sortable\"),Object(h.a)(T,\"stackable\"),Object(h.a)(B,\"striped\"),Object(h.a)(D,\"structured\"),Object(h.a)(I,\"unstackable\"),Object(h.b)(t,\"attached\"),Object(h.b)(a,\"basic\"),Object(h.b)(i,\"compact\"),Object(h.b)(R,\"padded\"),Object(h.d)(L),Object(h.f)(W),Object(h.g)(o,\"column\"),\"table\",c),S=Object(g.a)(F,e),U=Object(w.a)(F,e);if(!y.a.isNil(n))return d.a.createElement(U,f()({},S,{className:J}),n);var Y={defaultProps:{cellAs:\"th\"}},M=(v||j)&&d.a.createElement(C,null,z.create(v,Y),O()(j,(function(e){return z.create(e,Y)})));return d.a.createElement(U,f()({},S,{className:J}),M,d.a.createElement(A,null,P&&O()(H,(function(e,t){return z.create(P(e,t))}))),b&&d.a.createElement(_,null,z.create(b)))}F.handledProps=[\"as\",\"attached\",\"basic\",\"celled\",\"children\",\"className\",\"collapsing\",\"color\",\"columns\",\"compact\",\"definition\",\"fixed\",\"footerRow\",\"headerRow\",\"headerRows\",\"inverted\",\"padded\",\"renderBodyRow\",\"selectable\",\"singleLine\",\"size\",\"sortable\",\"stackable\",\"striped\",\"structured\",\"tableData\",\"textAlign\",\"unstackable\",\"verticalAlign\"],F.defaultProps={as:\"table\"},F.propTypes={},F.Body=A,F.Cell=E,F.Footer=_,F.Header=C,F.HeaderCell=B,F.Row=z;var H=F,L=a(\"QetY\"),I=a(\"8cHP\"),W=a(\"5Yp1\"),J=a(\"VC3L\"),S=a(\"JX7q\"),U=a(\"rePB\"),Y=a(\"oZBQ\"),M=d.a.createElement;function Q(e){var t=function(){if(\"undefined\"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=Object(u.a)(e);if(t){var n=Object(u.a)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return Object(i.a)(this,a)}}var X=function(e){Object(o.a)(a,e);var t=Q(a);function a(){var e;Object(l.a)(this,a);for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return e=t.call.apply(t,[this].concat(s)),Object(U.a)(Object(S.a)(e),\"onApprove\",Object(c.a)(n.a.mark((function t(){var a,r;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=Object(J.a)(e.props.address),t.next=3,Y.a.eth.getAccounts();case 3:return r=t.sent,t.next=6,a.methods.approveRequest(e.props.id).send({from:r[0]});case 6:case\"end\":return t.stop()}}),t)})))),Object(U.a)(Object(S.a)(e),\"onFinalize\",Object(c.a)(n.a.mark((function t(){var a,r;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(\"in finalize\"),a=Object(J.a)(e.props.address),t.next=4,Y.a.eth.getAccounts();case 4:return r=t.sent,t.next=7,a.methods.finalizeRequest(e.props.id).send({from:r[0]});case 7:case\"end\":return t.stop()}}),t)})))),e}return Object(s.a)(a,[{key:\"render\",value:function(){var e=H.Row,t=H.Cell,a=this.props,r=a.id,n=a.request,c=a.approversCount,l=n.approvalCount>c/2;return M(e,{textAlign:\"center\",disabled:n.complete,positive:l&&!n.complete},M(t,null,r),M(t,null,n.description),M(t,null,Y.a.utils.fromWei(n.value,\"ether\")),M(t,null,n.recipient),M(t,null,n.approvalCount,\"/\",c,\" \"),M(t,null,n.complete?null:M(L.a,{color:\"orange\",basic:!0,onClick:this.onApprove},\"Approve\")),M(t,null,n.complete?null:M(L.a,{color:\"teal\",basic:!0,onClick:this.onFinalize},\"Finalize\")))}}]),a}(p.Component),Z=d.a.createElement;function K(e){var t=function(){if(\"undefined\"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=Object(u.a)(e);if(t){var n=Object(u.a)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return Object(i.a)(this,a)}}var V=function(e){Object(o.a)(a,e);var t=K(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:\"renderRows\",value:function(){var e=this;return this.props.requests.map((function(t,a){return Z(X,{key:a,id:a,request:t,address:e.props.address,approversCount:e.props.approversCount})}))}},{key:\"render\",value:function(){var e=H.Header,t=H.Row,a=H.HeaderCell,r=H.Body;return Z(W.a,null,Z(\"h3\",null,\"Requests\"),Z(I.Link,{route:\"/campaigns/\".concat(this.props.address,\"/requests/new\")},Z(\"a\",null,Z(L.a,{primary:!0,floated:\"right\",style:{marginBottom:10}},\"Add Request\"))),Z(H,null,Z(e,null,Z(t,{textAlign:\"center\"},Z(a,null,\"ID\"),Z(a,null,\"Description\"),Z(a,null,\"Amount\"),Z(a,null,\"Recipient\"),Z(a,null,\"Approval\"),Z(a,null,\"Approve\"),Z(a,null,\"Finalize\"))),Z(r,null,this.renderRows())),Z(\"div\",null,\"Found \",this.props.requestCount,\" requests.\"))}}],[{key:\"getInitialProps\",value:function(){var e=Object(c.a)(n.a.mark((function e(t){var a,r,c,l,s;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.query.address,r=Object(J.a)(a),e.next=4,r.methods.getRequestCount().call();case 4:return c=e.sent,e.next=7,r.methods.approversCount().call();case 7:return l=e.sent,e.next=10,Promise.all(Array(parseInt(c)).fill().map((function(e,t){return r.methods.requests(t).call()})));case 10:return s=e.sent,e.abrupt(\"return\",{address:a,requests:s,requestCount:c,approversCount:l});case 12:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),a}(p.Component);t.default=V},\"m/hO\":function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/campaigns/requests\",function(){return a(\"Mybo\")}])},rePB:function(e,t,a){\"use strict\";function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}a.d(t,\"a\",(function(){return r}))}},[[\"m/hO\",0,2,1,3,4]]]);","extractedComments":[]}